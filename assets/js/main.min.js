/*$(document).on('submit', '#sendThisForm', function () {
    var myData = $(this).serialize();
    $.ajax({
        url: "/assets/ajax/mail.php",
        type: "POST",
        dataType: 'json',
        data: myData,
        success: function (result) {
            alert(result.message);
        },
    });
    return false;
})*/
window.onload = function () {
    //slider - start
    var multiItemSlider = (function () {
        return function (selector, config) {
            var
                mainBlock = document.querySelector(selector),
                sliderWrapper = mainBlock.querySelector('.ddsWrapper'),
                sliderItems = mainBlock.querySelectorAll('.ddsItem'),
                sliderControls = mainBlock.querySelectorAll('.ddsSliderControl'),
                sliderControlLeft = mainBlock.querySelector('.ddsSliderControl_left'),
                sliderControlRight = mainBlock.querySelector('.ddsSliderControl_right'),
                wrapperWdth = parseFloat(getComputedStyle(sliderWrapper).width),
                itemWidth = parseFloat(getComputedStyle(sliderItems[0]).width),
                positionLeftItem = 0,
                transform = 0,
                step = itemWidth / wrapperWdth * 100,
                items = [];
            sliderItems.forEach(function (item, index) {
                items.push({ item: item, position: index, transform: 0 });
            });

            var position = {
                getMin: 0,
                getMax: items.length - 1,
            }

            var transformItem = function (direction) {
                if (direction === 'right') {
                    if ((positionLeftItem + wrapperWdth / itemWidth - 1) >= position.getMax) {
                        return;
                    }
                    if (!sliderControlLeft.classList.contains('ddsSliderControl_show')) {
                        sliderControlLeft.classList.add('ddsSliderControl_show');
                    }
                    if (sliderControlRight.classList.contains('ddsSliderControl_show') && (positionLeftItem + wrapperWdth / itemWidth) >= position.getMax) {
                        sliderControlRight.classList.remove('ddsSliderControl_show');
                    }
                    positionLeftItem++;
                    transform -= step;
                }
                if (direction === 'left') {
                    if (positionLeftItem <= position.getMin) {
                        return;
                    }
                    if (!sliderControlRight.classList.contains('ddsSliderControl_show')) {
                        sliderControlRight.classList.add('ddsSliderControl_show');
                    }
                    if (sliderControlLeft.classList.contains('ddsSliderControl_show') && positionLeftItem - 1 <= position.getMin) {
                        sliderControlLeft.classList.remove('ddsSliderControl_show');
                    }
                    positionLeftItem--;
                    transform += step;
                }
                sliderWrapper.style.transform = 'translateX(' + transform + '%)';
            }
            var controlClick = function (e) {
                if (e.target.classList.contains('ddsSliderControl')) {
                    e.preventDefault();
                    var direction = e.target.classList.contains('ddsSliderControl_right') ? 'right' : 'left';
                    transformItem(direction);
                }
            };

            var setUpListeners = function () {
                sliderControls.forEach(function (item) {
                    item.addEventListener('click', controlClick);
                });
            }
            setUpListeners();

            return {
                right: function () {
                    transformItem('right');
                },
                left: function () {
                    transformItem('left');
                }
            }

        }
    }());
    var slider = multiItemSlider('.slider')
    //slider - end
    //form send - start
    function i(c) {
        return document.getElementById(c);
    }

    var url='/assets/ajax/mailSend.php';
    i('sendThisForm').addEventListener('submit', postData);
    function postData(event){
        event.preventDefault();
        const formData = new URLSearchParams(new FormData(i('sendThisForm'))).toString();
        fetch(url, {
            method: 'POST',
            body: formData,
        }).then(response => response.json())
            .then((data) =>  alert(data));
        i('sendThisForm').reset();
    }
    //form send - end

    //up button start
    mybutton = i("myBtn");

    window.onscroll = function() {
        scrollFunction()
    };
    function scrollFunction() {
        if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
            mybutton.style.display = "block";
        } else {
            mybutton.style.display = "none";
        }
    }
    function topFunction() {
        document.body.scrollTop = 0;
        document.documentElement.scrollTop = 0;
    }
    mybutton.addEventListener('click', topFunction)

    //up button end
}